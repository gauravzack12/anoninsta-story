{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React, { Component, forwardRef } from 'react';\nimport { getPosX, throttle } from './utils';\n\nvar ProgressBar = function (_Component) {\n  _inherits(ProgressBar, _Component);\n\n  var _super = _createSuper(ProgressBar);\n\n  function ProgressBar() {\n    var _this;\n\n    _classCallCheck(this, ProgressBar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"audio\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"timeOnMouseMove\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"hasAddedAudioEventListener\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"downloadProgressAnimationTimer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isDraggingProgress: false,\n      currentTimePos: '0%',\n      hasDownloadProgressAnimation: false,\n      downloadProgressArr: [],\n      waitingForSeekCallback: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCurrentProgress\", function (event) {\n      var _this$props = _this.props,\n          audio = _this$props.audio,\n          progressBar = _this$props.progressBar;\n      var isSingleFileProgressiveDownload = audio.src.indexOf('blob:') !== 0 && typeof _this.props.srcDuration === 'undefined';\n\n      if (isSingleFileProgressiveDownload && (!audio.src || !isFinite(audio.currentTime) || !progressBar.current)) {\n        return {\n          currentTime: 0,\n          currentTimePos: '0%'\n        };\n      }\n\n      var progressBarRect = progressBar.current.getBoundingClientRect();\n      var maxRelativePos = progressBarRect.width;\n      var relativePos = getPosX(event) - progressBarRect.left;\n\n      if (relativePos < 0) {\n        relativePos = 0;\n      } else if (relativePos > maxRelativePos) {\n        relativePos = maxRelativePos;\n      }\n\n      var duration = _this.getDuration();\n\n      var currentTime = duration * relativePos / maxRelativePos;\n      return {\n        currentTime: currentTime,\n        currentTimePos: \"\".concat((relativePos / maxRelativePos * 100).toFixed(2), \"%\")\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleContextMenu\", function (event) {\n      event.preventDefault();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseDownOrTouchStartProgressBar\", function (event) {\n      event.stopPropagation();\n\n      var _this$getCurrentProgr = _this.getCurrentProgress(event.nativeEvent),\n          currentTime = _this$getCurrentProgr.currentTime,\n          currentTimePos = _this$getCurrentProgr.currentTimePos;\n\n      if (isFinite(currentTime)) {\n        _this.timeOnMouseMove = currentTime;\n\n        _this.setState({\n          isDraggingProgress: true,\n          currentTimePos: currentTimePos\n        });\n\n        if (event.nativeEvent instanceof MouseEvent) {\n          window.addEventListener('mousemove', _this.handleWindowMouseOrTouchMove);\n          window.addEventListener('mouseup', _this.handleWindowMouseOrTouchUp);\n        } else {\n          window.addEventListener('touchmove', _this.handleWindowMouseOrTouchMove);\n          window.addEventListener('touchend', _this.handleWindowMouseOrTouchUp);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWindowMouseOrTouchMove\", function (event) {\n      if (event instanceof MouseEvent) {\n        event.preventDefault();\n      }\n\n      event.stopPropagation();\n      var windowSelection = window.getSelection();\n\n      if (windowSelection && windowSelection.type === 'Range') {\n        windowSelection.empty();\n      }\n\n      var isDraggingProgress = _this.state.isDraggingProgress;\n\n      if (isDraggingProgress) {\n        var _this$getCurrentProgr2 = _this.getCurrentProgress(event),\n            currentTime = _this$getCurrentProgr2.currentTime,\n            currentTimePos = _this$getCurrentProgr2.currentTimePos;\n\n        _this.timeOnMouseMove = currentTime;\n\n        _this.setState({\n          currentTimePos: currentTimePos\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWindowMouseOrTouchUp\", function (event) {\n      event.stopPropagation();\n      var newTime = _this.timeOnMouseMove;\n      var _this$props2 = _this.props,\n          audio = _this$props2.audio,\n          onChangeCurrentTimeError = _this$props2.onChangeCurrentTimeError,\n          onSeek = _this$props2.onSeek;\n\n      if (onSeek) {\n        _this.setState({\n          isDraggingProgress: false,\n          waitingForSeekCallback: true\n        }, function () {\n          onSeek(audio, newTime).then(function () {\n            return _this.setState({\n              waitingForSeekCallback: false\n            });\n          }, function (err) {\n            throw new Error(err);\n          });\n        });\n      } else {\n        var newProps = {\n          isDraggingProgress: false\n        };\n\n        if (audio.readyState === audio.HAVE_NOTHING || audio.readyState === audio.HAVE_METADATA || !isFinite(newTime)) {\n          newProps.currentTimePos = '0%';\n          onChangeCurrentTimeError && onChangeCurrentTimeError();\n        } else {\n          audio.currentTime = newTime;\n        }\n\n        _this.setState(newProps);\n      }\n\n      if (event instanceof MouseEvent) {\n        window.removeEventListener('mousemove', _this.handleWindowMouseOrTouchMove);\n        window.removeEventListener('mouseup', _this.handleWindowMouseOrTouchUp);\n      } else {\n        window.removeEventListener('touchmove', _this.handleWindowMouseOrTouchMove);\n        window.removeEventListener('touchend', _this.handleWindowMouseOrTouchUp);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAudioTimeUpdate\", throttle(function (e) {\n      var isDraggingProgress = _this.state.isDraggingProgress;\n      var audio = e.target;\n      if (isDraggingProgress || _this.state.waitingForSeekCallback === true) return;\n      var currentTime = audio.currentTime;\n\n      var duration = _this.getDuration();\n\n      _this.setState({\n        currentTimePos: \"\".concat((currentTime / duration * 100 || 0).toFixed(2), \"%\")\n      });\n    }, _this.props.progressUpdateInterval));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAudioDownloadProgressUpdate\", function (e) {\n      var audio = e.target;\n\n      var duration = _this.getDuration();\n\n      var downloadProgressArr = [];\n\n      for (var i = 0; i < audio.buffered.length; i++) {\n        var bufferedStart = audio.buffered.start(i);\n        var bufferedEnd = audio.buffered.end(i);\n        downloadProgressArr.push({\n          left: \"\".concat(Math.round(100 / duration * bufferedStart) || 0, \"%\"),\n          width: \"\".concat(Math.round(100 / duration * (bufferedEnd - bufferedStart)) || 0, \"%\")\n        });\n      }\n\n      clearTimeout(_this.downloadProgressAnimationTimer);\n\n      _this.setState({\n        downloadProgressArr: downloadProgressArr,\n        hasDownloadProgressAnimation: true\n      });\n\n      _this.downloadProgressAnimationTimer = setTimeout(function () {\n        _this.setState({\n          hasDownloadProgressAnimation: false\n        });\n      }, 200);\n    });\n\n    return _this;\n  }\n\n  _createClass(ProgressBar, [{\n    key: \"getDuration\",\n    value: function getDuration() {\n      var _this$props3 = this.props,\n          audio = _this$props3.audio,\n          srcDuration = _this$props3.srcDuration;\n      return typeof srcDuration === 'undefined' ? audio.duration : srcDuration;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var audio = this.props.audio;\n\n      if (audio && !this.hasAddedAudioEventListener) {\n        this.audio = audio;\n        this.hasAddedAudioEventListener = true;\n        audio.addEventListener('timeupdate', this.handleAudioTimeUpdate);\n        audio.addEventListener('progress', this.handleAudioDownloadProgressUpdate);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.audio && this.hasAddedAudioEventListener) {\n        this.audio.removeEventListener('timeupdate', this.handleAudioTimeUpdate);\n        this.audio.removeEventListener('progress', this.handleAudioDownloadProgressUpdate);\n      }\n\n      clearTimeout(this.downloadProgressAnimationTimer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          showDownloadProgress = _this$props4.showDownloadProgress,\n          showFilledProgress = _this$props4.showFilledProgress,\n          progressBar = _this$props4.progressBar,\n          i18nProgressBar = _this$props4.i18nProgressBar;\n      var _this$state = this.state,\n          currentTimePos = _this$state.currentTimePos,\n          downloadProgressArr = _this$state.downloadProgressArr,\n          hasDownloadProgressAnimation = _this$state.hasDownloadProgressAnimation;\n      return React.createElement(\"div\", {\n        className: \"rhap_progress-container\",\n        ref: progressBar,\n        \"aria-label\": i18nProgressBar,\n        role: \"progressbar\",\n        \"aria-valuemin\": 0,\n        \"aria-valuemax\": 100,\n        \"aria-valuenow\": Number(currentTimePos.split('%')[0]),\n        tabIndex: 0,\n        onMouseDown: this.handleMouseDownOrTouchStartProgressBar,\n        onTouchStart: this.handleMouseDownOrTouchStartProgressBar,\n        onContextMenu: this.handleContextMenu\n      }, React.createElement(\"div\", {\n        className: \"rhap_progress-bar \".concat(showDownloadProgress ? 'rhap_progress-bar-show-download' : '')\n      }, React.createElement(\"div\", {\n        className: \"rhap_progress-indicator\",\n        style: {\n          left: currentTimePos\n        }\n      }), showFilledProgress && React.createElement(\"div\", {\n        className: \"rhap_progress-filled\",\n        style: {\n          width: currentTimePos\n        }\n      }), showDownloadProgress && downloadProgressArr.map(function (_ref, i) {\n        var left = _ref.left,\n            width = _ref.width;\n        return React.createElement(\"div\", {\n          key: i,\n          className: \"rhap_download-progress\",\n          style: {\n            left: left,\n            width: width,\n            transitionDuration: hasDownloadProgressAnimation ? '.2s' : '0s'\n          }\n        });\n      })));\n    }\n  }]);\n\n  return ProgressBar;\n}(Component);\n\nvar ProgressBarForwardRef = function ProgressBarForwardRef(props, ref) {\n  return React.createElement(ProgressBar, _extends({}, props, {\n    progressBar: ref\n  }));\n};\n\nexport default forwardRef(ProgressBarForwardRef);\nexport { ProgressBar, ProgressBarForwardRef };","map":{"version":3,"sources":["C:/Users/ASUS/Downloads/Media-Downloader-main/Media-Downloader-main/Instagram Downloader V2/node_modules/react-h5-audio-player/es/ProgressBar.js"],"names":["_extends","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","React","Component","forwardRef","getPosX","throttle","ProgressBar","_Component","_super","_this","_len","length","args","Array","_key","concat","isDraggingProgress","currentTimePos","hasDownloadProgressAnimation","downloadProgressArr","waitingForSeekCallback","event","_this$props","props","audio","progressBar","isSingleFileProgressiveDownload","src","indexOf","srcDuration","isFinite","currentTime","current","progressBarRect","getBoundingClientRect","maxRelativePos","width","relativePos","left","duration","getDuration","toFixed","preventDefault","stopPropagation","_this$getCurrentProgr","getCurrentProgress","nativeEvent","timeOnMouseMove","setState","MouseEvent","window","addEventListener","handleWindowMouseOrTouchMove","handleWindowMouseOrTouchUp","windowSelection","getSelection","type","empty","state","_this$getCurrentProgr2","newTime","_this$props2","onChangeCurrentTimeError","onSeek","then","err","Error","newProps","readyState","HAVE_NOTHING","HAVE_METADATA","removeEventListener","target","progressUpdateInterval","i","buffered","bufferedStart","start","bufferedEnd","end","push","Math","round","clearTimeout","downloadProgressAnimationTimer","setTimeout","key","value","_this$props3","componentDidUpdate","hasAddedAudioEventListener","handleAudioTimeUpdate","handleAudioDownloadProgressUpdate","componentWillUnmount","render","_this$props4","showDownloadProgress","showFilledProgress","i18nProgressBar","_this$state","createElement","className","ref","role","Number","split","tabIndex","onMouseDown","handleMouseDownOrTouchStartProgressBar","onTouchStart","onContextMenu","handleContextMenu","style","map","_ref","transitionDuration","ProgressBarForwardRef"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component, forwardRef } from 'react';\nimport { getPosX, throttle } from './utils';\n\nvar ProgressBar = function (_Component) {\n  _inherits(ProgressBar, _Component);\n\n  var _super = _createSuper(ProgressBar);\n\n  function ProgressBar() {\n    var _this;\n\n    _classCallCheck(this, ProgressBar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"audio\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"timeOnMouseMove\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"hasAddedAudioEventListener\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"downloadProgressAnimationTimer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isDraggingProgress: false,\n      currentTimePos: '0%',\n      hasDownloadProgressAnimation: false,\n      downloadProgressArr: [],\n      waitingForSeekCallback: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCurrentProgress\", function (event) {\n      var _this$props = _this.props,\n          audio = _this$props.audio,\n          progressBar = _this$props.progressBar;\n      var isSingleFileProgressiveDownload = audio.src.indexOf('blob:') !== 0 && typeof _this.props.srcDuration === 'undefined';\n\n      if (isSingleFileProgressiveDownload && (!audio.src || !isFinite(audio.currentTime) || !progressBar.current)) {\n        return {\n          currentTime: 0,\n          currentTimePos: '0%'\n        };\n      }\n\n      var progressBarRect = progressBar.current.getBoundingClientRect();\n      var maxRelativePos = progressBarRect.width;\n      var relativePos = getPosX(event) - progressBarRect.left;\n\n      if (relativePos < 0) {\n        relativePos = 0;\n      } else if (relativePos > maxRelativePos) {\n        relativePos = maxRelativePos;\n      }\n\n      var duration = _this.getDuration();\n\n      var currentTime = duration * relativePos / maxRelativePos;\n      return {\n        currentTime: currentTime,\n        currentTimePos: \"\".concat((relativePos / maxRelativePos * 100).toFixed(2), \"%\")\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleContextMenu\", function (event) {\n      event.preventDefault();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMouseDownOrTouchStartProgressBar\", function (event) {\n      event.stopPropagation();\n\n      var _this$getCurrentProgr = _this.getCurrentProgress(event.nativeEvent),\n          currentTime = _this$getCurrentProgr.currentTime,\n          currentTimePos = _this$getCurrentProgr.currentTimePos;\n\n      if (isFinite(currentTime)) {\n        _this.timeOnMouseMove = currentTime;\n\n        _this.setState({\n          isDraggingProgress: true,\n          currentTimePos: currentTimePos\n        });\n\n        if (event.nativeEvent instanceof MouseEvent) {\n          window.addEventListener('mousemove', _this.handleWindowMouseOrTouchMove);\n          window.addEventListener('mouseup', _this.handleWindowMouseOrTouchUp);\n        } else {\n          window.addEventListener('touchmove', _this.handleWindowMouseOrTouchMove);\n          window.addEventListener('touchend', _this.handleWindowMouseOrTouchUp);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWindowMouseOrTouchMove\", function (event) {\n      if (event instanceof MouseEvent) {\n        event.preventDefault();\n      }\n\n      event.stopPropagation();\n      var windowSelection = window.getSelection();\n\n      if (windowSelection && windowSelection.type === 'Range') {\n        windowSelection.empty();\n      }\n\n      var isDraggingProgress = _this.state.isDraggingProgress;\n\n      if (isDraggingProgress) {\n        var _this$getCurrentProgr2 = _this.getCurrentProgress(event),\n            currentTime = _this$getCurrentProgr2.currentTime,\n            currentTimePos = _this$getCurrentProgr2.currentTimePos;\n\n        _this.timeOnMouseMove = currentTime;\n\n        _this.setState({\n          currentTimePos: currentTimePos\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWindowMouseOrTouchUp\", function (event) {\n      event.stopPropagation();\n      var newTime = _this.timeOnMouseMove;\n      var _this$props2 = _this.props,\n          audio = _this$props2.audio,\n          onChangeCurrentTimeError = _this$props2.onChangeCurrentTimeError,\n          onSeek = _this$props2.onSeek;\n\n      if (onSeek) {\n        _this.setState({\n          isDraggingProgress: false,\n          waitingForSeekCallback: true\n        }, function () {\n          onSeek(audio, newTime).then(function () {\n            return _this.setState({\n              waitingForSeekCallback: false\n            });\n          }, function (err) {\n            throw new Error(err);\n          });\n        });\n      } else {\n        var newProps = {\n          isDraggingProgress: false\n        };\n\n        if (audio.readyState === audio.HAVE_NOTHING || audio.readyState === audio.HAVE_METADATA || !isFinite(newTime)) {\n          newProps.currentTimePos = '0%';\n          onChangeCurrentTimeError && onChangeCurrentTimeError();\n        } else {\n          audio.currentTime = newTime;\n        }\n\n        _this.setState(newProps);\n      }\n\n      if (event instanceof MouseEvent) {\n        window.removeEventListener('mousemove', _this.handleWindowMouseOrTouchMove);\n        window.removeEventListener('mouseup', _this.handleWindowMouseOrTouchUp);\n      } else {\n        window.removeEventListener('touchmove', _this.handleWindowMouseOrTouchMove);\n        window.removeEventListener('touchend', _this.handleWindowMouseOrTouchUp);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAudioTimeUpdate\", throttle(function (e) {\n      var isDraggingProgress = _this.state.isDraggingProgress;\n      var audio = e.target;\n      if (isDraggingProgress || _this.state.waitingForSeekCallback === true) return;\n      var currentTime = audio.currentTime;\n\n      var duration = _this.getDuration();\n\n      _this.setState({\n        currentTimePos: \"\".concat((currentTime / duration * 100 || 0).toFixed(2), \"%\")\n      });\n    }, _this.props.progressUpdateInterval));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleAudioDownloadProgressUpdate\", function (e) {\n      var audio = e.target;\n\n      var duration = _this.getDuration();\n\n      var downloadProgressArr = [];\n\n      for (var i = 0; i < audio.buffered.length; i++) {\n        var bufferedStart = audio.buffered.start(i);\n        var bufferedEnd = audio.buffered.end(i);\n        downloadProgressArr.push({\n          left: \"\".concat(Math.round(100 / duration * bufferedStart) || 0, \"%\"),\n          width: \"\".concat(Math.round(100 / duration * (bufferedEnd - bufferedStart)) || 0, \"%\")\n        });\n      }\n\n      clearTimeout(_this.downloadProgressAnimationTimer);\n\n      _this.setState({\n        downloadProgressArr: downloadProgressArr,\n        hasDownloadProgressAnimation: true\n      });\n\n      _this.downloadProgressAnimationTimer = setTimeout(function () {\n        _this.setState({\n          hasDownloadProgressAnimation: false\n        });\n      }, 200);\n    });\n\n    return _this;\n  }\n\n  _createClass(ProgressBar, [{\n    key: \"getDuration\",\n    value: function getDuration() {\n      var _this$props3 = this.props,\n          audio = _this$props3.audio,\n          srcDuration = _this$props3.srcDuration;\n      return typeof srcDuration === 'undefined' ? audio.duration : srcDuration;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var audio = this.props.audio;\n\n      if (audio && !this.hasAddedAudioEventListener) {\n        this.audio = audio;\n        this.hasAddedAudioEventListener = true;\n        audio.addEventListener('timeupdate', this.handleAudioTimeUpdate);\n        audio.addEventListener('progress', this.handleAudioDownloadProgressUpdate);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.audio && this.hasAddedAudioEventListener) {\n        this.audio.removeEventListener('timeupdate', this.handleAudioTimeUpdate);\n        this.audio.removeEventListener('progress', this.handleAudioDownloadProgressUpdate);\n      }\n\n      clearTimeout(this.downloadProgressAnimationTimer);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          showDownloadProgress = _this$props4.showDownloadProgress,\n          showFilledProgress = _this$props4.showFilledProgress,\n          progressBar = _this$props4.progressBar,\n          i18nProgressBar = _this$props4.i18nProgressBar;\n      var _this$state = this.state,\n          currentTimePos = _this$state.currentTimePos,\n          downloadProgressArr = _this$state.downloadProgressArr,\n          hasDownloadProgressAnimation = _this$state.hasDownloadProgressAnimation;\n      return React.createElement(\"div\", {\n        className: \"rhap_progress-container\",\n        ref: progressBar,\n        \"aria-label\": i18nProgressBar,\n        role: \"progressbar\",\n        \"aria-valuemin\": 0,\n        \"aria-valuemax\": 100,\n        \"aria-valuenow\": Number(currentTimePos.split('%')[0]),\n        tabIndex: 0,\n        onMouseDown: this.handleMouseDownOrTouchStartProgressBar,\n        onTouchStart: this.handleMouseDownOrTouchStartProgressBar,\n        onContextMenu: this.handleContextMenu\n      }, React.createElement(\"div\", {\n        className: \"rhap_progress-bar \".concat(showDownloadProgress ? 'rhap_progress-bar-show-download' : '')\n      }, React.createElement(\"div\", {\n        className: \"rhap_progress-indicator\",\n        style: {\n          left: currentTimePos\n        }\n      }), showFilledProgress && React.createElement(\"div\", {\n        className: \"rhap_progress-filled\",\n        style: {\n          width: currentTimePos\n        }\n      }), showDownloadProgress && downloadProgressArr.map(function (_ref, i) {\n        var left = _ref.left,\n            width = _ref.width;\n        return React.createElement(\"div\", {\n          key: i,\n          className: \"rhap_download-progress\",\n          style: {\n            left: left,\n            width: width,\n            transitionDuration: hasDownloadProgressAnimation ? '.2s' : '0s'\n          }\n        });\n      })));\n    }\n  }]);\n\n  return ProgressBar;\n}(Component);\n\nvar ProgressBarForwardRef = function ProgressBarForwardRef(props, ref) {\n  return React.createElement(ProgressBar, _extends({}, props, {\n    progressBar: ref\n  }));\n};\n\nexport default forwardRef(ProgressBarForwardRef);\nexport { ProgressBar, ProgressBarForwardRef };"]},"metadata":{},"sourceType":"module"}